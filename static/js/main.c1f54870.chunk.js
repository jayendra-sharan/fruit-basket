(this["webpackJsonpfruit-basket"]=this["webpackJsonpfruit-basket"]||[]).push([[0],{85:function(e,t,r){},86:function(e,t,r){},96:function(e,t,r){},97:function(e,t,r){},98:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),a=r(25),i=r.n(a),c=(r(85),r(35)),o=r(77),u=r(10),d=(r(86),r(101)),l=r(6);function j(e){var t=e.error;return t.hasError?Object(l.jsx)(d.a,{description:t.errorMessage,type:"error",showIcon:!0,closable:!0}):null}var b=r(100),p=r(78);function g(e){var t=e.fruit,r=e.updateQuanity;return Object(l.jsxs)(b.a,{className:"fruit-wrapper",style:{backgroundColor:t.color},children:[Object(l.jsx)("p",{className:"fruit-name",children:t.name}),Object(l.jsx)("p",{className:"fruit-quantity",children:t.quantity}),Object(l.jsxs)("div",{className:"fruits-actions",children:[Object(l.jsx)(p.a,{disabled:10===t.quantity,onClick:function(){return r(1,t)},type:"primary",shape:"circle",children:"+"}),Object(l.jsx)(p.a,{disabled:0===t.quantity,onClick:function(){return r(-1,t)},type:"primary",shape:"circle",children:"-"})]})]})}var m=r(79),O=r(42),f=[{name:"Apple",color:"#f35149",quantity:10,id:"APL"},{name:"Orange",color:"#e69c4b",quantity:10,id:"ORNG"},{name:"Grapes",color:"#5460da",quantity:10,id:"GRP"}],h=function(e,t,r){return r.map((function(r){return r.id===t.id?Object(O.a)(Object(O.a)({},r),{},{quantity:r.quantity+e}):r}))},x=function(e,t,r){return-1===e?[t].concat(Object(m.a)(r)):r.slice(1)};function v(e){var t=e.setLoginStatus,r=Object(u.g)();return Object(l.jsxs)("div",{className:"top-nav",children:[Object(l.jsx)("h1",{children:"All Items"}),Object(l.jsx)("button",{type:"secondary",onClick:function(){r.push("/login"),t({status:!1,user:null})},children:"Sign Out"})]})}function y(e){var t=e.fruit;return Object(l.jsx)("div",{style:{backgroundColor:t.color},className:"fruit-bar"})}function w(e){var t=e.loginData,r=e.setLoginStatus,s=t.isLoggedIn,a=t.user,i=Object(u.g)();s||i.push("/login");var o=Object(n.useState)(f),d=Object(c.a)(o,2),p=d[0],m=d[1],O=Object(n.useState)([]),w=Object(c.a)(O,2),L=w[0],S=w[1],k=Object(n.useState)({hasError:!1,errorMessage:""}),N=Object(c.a)(k,2),C=N[0],M=N[1],I=function(e,t){if(M({hasError:!1,errorMessage:""}),"all"===a.permission)switch(e){case 1:return void(!function(e,t,r){var n=r[0];return 1===e&&n.id===t.id}(e,t,L)?M({hasError:!0,errorMessage:"Only the fruit on top can be removed."}):(m(h(e,t,p)),S(x(e,t,L))));case-1:return m(h(e,t,p)),void S(x(e,t,L));default:return}else M({hasError:!0,errorMessage:"You are not authorised to update basket"})};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(v,{setLoginStatus:r}),Object(l.jsx)("div",{className:"fruits-home",children:p.map((function(e){return Object(l.jsx)(g,{updateQuanity:I,fruit:e},e.id)}))}),Object(l.jsx)("div",{className:"fruits-updates",children:Object(l.jsx)(b.a,{title:"Basket Stack",children:L.map((function(e){return Object(l.jsx)(y,{fruit:e},"".concat(e.id,".").concat(e.quantity))}))})}),Object(l.jsx)(j,{error:C})]})}r(96);var L=r(56),S=r(103),k={user1:{name:"Admin",permission:"all",password:"Admin"},user2:{name:"MyName",permission:"none",password:"test"}};function N(e){var t=e.username,r=e.password,n=1e3*(.5+2*Math.random());return new Promise((function(e,s){setTimeout((function(){var n=function(e,t){return Object.keys(k).filter((function(r){var n=k[r];return n.name===e&&n.password===t}))}(t,r);n.length?e(k[n[0]]):s(new Error("Invalid credentials"))}),n)}))}function C(e){var t=e.setLoginStatus,r=Object(u.g)(),s=Object(n.useState)({username:"",password:"",errorMessage:"",isLoading:!1}),a=Object(c.a)(s,2),i=a[0],o=a[1],d=function(e){o(Object(O.a)(Object(O.a)({},i),e))},j=function(e){d(Object(L.a)({},e.target.id,e.target.value))},g=i.username,m=i.password,f=i.errorMessage,h=i.isLoading;return Object(l.jsxs)(b.a,{title:"Login",className:"login-form",children:[Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d({isLoading:!0}),N({username:i.username,password:i.password}).then((function(e){d({isLoading:!1,username:"",password:"",errorMessage:""}),e&&(t({status:!0,user:e}),r.push("/home"))})).catch((function(e){d({isLoading:!1,errorMessage:e.message,username:"",password:""})}))},children:[Object(l.jsx)(S.a,{autoComplete:"username",id:"username",placeholder:"username",type:"text",value:g,onChange:j}),Object(l.jsx)(S.a,{autoComplete:"current-password",id:"password",placeholder:"password",type:"password",value:m,onChange:j}),Object(l.jsx)(p.a,{disabled:!g||!m||h,htmlType:"submit",type:"primary",children:h?"Logging In...":"Submit"})]}),Object(l.jsx)("div",{className:"login-error",children:f})]})}r(97);var M=function(){var e=Object(n.useState)({isLoggedIn:!1,user:null}),t=Object(c.a)(e,2),r=t[0],s=t[1],a=function(e){var t=e.status,r=e.user;s({isLoggedIn:t,user:r})};return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(o.a,{children:Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(l.jsx)(u.a,{to:"/login"})}}),Object(l.jsx)(u.b,{path:"/login",children:Object(l.jsx)(C,{setLoginStatus:a,isLoggedIn:r.isLoggedIn})}),Object(l.jsx)(u.b,{path:"/home",children:Object(l.jsx)(w,{setLoginStatus:a,loginData:r})})]})})})},I=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,104)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),s(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(M,{})}),document.getElementById("root")),I()}},[[98,1,2]]]);
//# sourceMappingURL=main.c1f54870.chunk.js.map